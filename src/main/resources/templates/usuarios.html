<!DOCTYPE html>
<html
  lang="es"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Usuarios Registrados - Tienda FourTech</title>
    <link rel="icon" href="img/logo.jpeg" type="image/png" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7"
      crossorigin="anonymous"
    />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <!-- Animate.css -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css" />
  </head>

  <body>
    <span class="ir-arriba">
      <i class="fa-solid fa-arrow-up"></i>
    </span>

    <!-- Header -->
    <header
      class="d-flex p-2 text-center py-4 justify-content-around align-items-center"
    >
        <div class="logo">
          <img src="img/logo.jpeg" alt="Logo FourTech" />
        </div>
        <div class="slogan">
          <h1>Tienda Fourtech</h1>
          <p>Tenemos lo necesario para ti.</p>
        </div>

        <!-- Sección de autenticación -->
        <div class="header-actions">
          <!-- Botones cuando NO está autenticado -->
          <div sec:authorize="!isAuthenticated()" class="auth-section">
            <a href="/login" class="btn btn-outline-primary me-2">
              <i class="fas fa-sign-in-alt"></i>
              Iniciar Sesión
            </a>
            <a href="/registro" class="btn btn-primary">
              <i class="fas fa-user-plus"></i>
              Registrarse
            </a>
          </div>

          <!-- Menú cuando SÍ está autenticado -->
          <div sec:authorize="isAuthenticated()" class="user-section">
            <div class="user-menu d-flex align-items-center">
              <span class="welcome-text me-3">
                <i class="fas fa-user-circle me-1"></i>
                Bienvenido, <strong sec:authentication="name">Usuario</strong>
              </span>
              <form th:action="@{/logout}" method="post" class="d-inline">
                <button type="submit" class="btn btn-outline-danger">
                  <i class="fas fa-sign-out-alt"></i>
                  Cerrar Sesión
                </button>
              </form>
            </div>
          </div>
        </div>
    </header>

    <nav
      class="navbar navbar-expand-lg bg-dark border-bottom border-body"
      data-bs-theme="dark"
    >
      <div class="container-fluid justify-content-end">
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarTogglerDemo01"
          aria-controls="navbarTogglerDemo01"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div
          class="collapse navbar-collapse justify-content-center text-center"
          id="navbarTogglerDemo01"
        >
          <ul class="navbar-nav mb-2 mb-lg-0 gap-5">
          <li class="nav-item">
            <a href="/" class="nav-link">Inicio</a>
          </li>
          <li class="nav-item">
            <a href="/computadoras" class="nav-link active">Computadoras</a>
          </li>
          <li class="nav-item">
            <a href="/laptops" class="nav-link">Laptops</a>
          </li>
          <li class="nav-item">
            <a href="/accesorios" class="nav-link">Accesorios</a>
          </li>
          <li class="nav-item">
            <a href="/usuarios" class="nav-link">Usuarios</a>
          </li>
        </ul>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
      <div class="container">
        <!-- Page Header -->
        <div class="section-header animate__animated animate__fadeInUp">
          <div class="section-title">
            <h2>
              <i class="fas fa-users"></i>
              Usuarios Registrados
            </h2>
            <p>Lista completa de usuarios en nuestra plataforma</p>
          </div>
        </div>

        <!-- Content Section -->
        <section class="content-section animate__animated animate__fadeInUp">
          <div th:if="${#lists.isEmpty(usuarios)}" class="empty-state">
            <div class="empty-icon">
              <i class="fas fa-users-slash"></i>
            </div>
            <h3>No hay usuarios registrados</h3>
            <p>Aún no hay usuarios registrados en la base de datos.</p>
            <a href="/registro" class="btn btn-primary">
              <i class="fas fa-user-plus"></i>
              Crear primera cuenta
            </a>
          </div>

          <div
            th:unless="${#lists.isEmpty(usuarios)}"
            class="users-table-container"
          >
            <div class="table-header">
              <h3>
                <i class="fas fa-table"></i>
                Lista de Usuarios
              </h3>
              <div class="table-stats">
                <span class="badge bg-primary">
                  <i class="fas fa-users"></i>
                  Total:
                  <span th:text="${#lists.size(usuarios)}">0</span> usuarios
                </span>
              </div>
            </div>

            <div class="table-responsive">
              <table class="table table-modern">
                <thead>
                  <tr>
                    <th>
                      <i class="fas fa-hashtag"></i>
                      ID
                    </th>
                    <th>
                      <i class="fas fa-user"></i>
                      Nombres
                    </th>
                    <th>
                      <i class="fas fa-user"></i>
                      Apellidos
                    </th>
                    <th>
                      <i class="fas fa-envelope"></i>
                      Email
                    </th>
                    <th>
                      <i class="fas fa-phone"></i>
                      Teléfono
                    </th>
                    <th>
                      <i class="fas fa-map-marker-alt"></i>
                      Dirección
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr th:each="usuario : ${usuarios}" class="table-row">
                    <td>
                      <span class="user-id" th:text="${usuario.id_usuario}"
                        >1</span
                      >
                    </td>
                    <td>
                      <div class="user-name">
                        <i class="fas fa-user text-primary"></i>
                        <span th:text="${usuario.nombres}">Nombre</span>
                      </div>
                    </td>
                    <td>
                      <div class="user-name">
                        <span th:text="${usuario.apellidos}">Apellido</span>
                      </div>
                    </td>
                    <td>
                      <div class="user-email">
                        <i class="fas fa-envelope text-info"></i>
                        <a
                          th:href="'mailto:' + ${usuario.email}"
                          th:text="${usuario.email}"
                          >email@example.com</a
                        >
                      </div>
                    </td>
                    <td>
                      <div class="user-phone">
                        <i class="fas fa-phone text-success"></i>
                        <span th:text="${usuario.telefono}">Teléfono</span>
                      </div>
                    </td>
                    <td>
                      <div class="user-address">
                        <i class="fas fa-map-marker-alt text-warning"></i>
                        <span th:text="${usuario.direccion}">Dirección</span>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </section>
      </div>
    </main>

    <!--PARA EL FOOTER: Derechos Copy -->
    <footer class="bg-dark text-white text-center py-4">
      <h6>© 2025 Tienda FourTech. Todos los derechos reservados.</h6>
      <div class="redes">
        <div class="social"><i class="fa-brands fa-facebook"></i></div>
        <div class="social"><i class="fa-brands fa-instagram"></i></div>
        <div class="social"><i class="fa-brands fa-tiktok"></i></div>
      </div>
    </footer>

    <!-- Para enlazar el script de nuestro directorio -->
    <script src="js/script.js"></script>
    <!-- Íconos -->
    <script
      src="https://kit.fontawesome.com/1da5200486.js"
      crossorigin="anonymous"
    ></script>
    <!-- Para algunas funciones -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <!-- Bootstrap -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq"
      crossorigin="anonymous"
    ></script>
    <!-- Para mensajes de alerta -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- Script para ir arriba -->
    <script>
      $(document).ready(function () {
        $(".ir-arriba").click(function () {
          $("body, html").animate(
            {
              scrollTop: "0px",
            },
            300
          );
        });
        $(window).scroll(function () {
          if ($(this).scrollTop() > 0) {
            $(".ir-arriba").slideDown(300);
          } else {
            $(".ir-arriba").slideUp(300);
          }
        });
      });
    </script>
  </body>
</html>
